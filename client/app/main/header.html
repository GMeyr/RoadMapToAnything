<!-- Materialize needs these scripts. -->
<!-- TODO: Find a centralized home -->
<script type="text/javascript">
  $( document ).ready(function(){ 
    $(".dropdown-button").dropdown();
    $(".button-collapse").sideNav();
    $('.modal-trigger').leanModal();
  });
</script>

<!--nav bar-->
<div class="navbar-fixed">
  <nav class="amber lighten-1">
    <div class="nav-wrapper container">  
      <a href="#" class="brand-logo">Roadmap to Anything</a>
      <a href="#" data-activates="collapsed-options" class="button-collapse right"><i class="material-icons">menu</i></a>
      <ul id="nav-mobile" class="right hide-on-med-and-down">
        <!-- Need to make a dropdown search -->
        <li><i class="mdi-action-search"></i></li>
        <li><a ui-sref="home.browse">Browse</a></li>
        <li><a ng-show="!isLoggedIn()" class="modal-trigger" href="#modal1">Sign in</a></li>
        <li><a ng-show="isLoggedIn()" class="dropdown-button" data-activates="dropdown" data-beloworigin="true">Hi, {{ getUsername() }}<i class="mdi-navigation-arrow-drop-down right"></i></a></li>
          <ul id="dropdown" class="dropdown-content collection">
            <li><a ui-sref="home.dashboard">Dashboard</a></li>
            <li><a ui-sref="home.roadmapCreation">Create Roadmap</a></li>
            <li ng-show="isLoggedIn()"><a ng-click="logout()">Logout</a></li>
          </ul> 
      </ul>
      <ul class="side-nav" id="collapsed-options">
        <li><a ng-show="!isLoggedIn()" class="modal-trigger" href="#modal1">Sign in</a></li>
        <li><a ui-sref="home.browse">Browse</a></li>
        <li ng-show="isLoggedIn()"><a ui-sref="home.dashboard">Dashboard</a></li>
        <li ng-show="isLoggedIn()"><a ui-sref="home.roadmapCreation">Create Roadmap</a></li>
        <li ng-show="isLoggedIn()"><a ng-click="logout()">Logout</a></li>
      </ul>
    </div>
  </nav> 
</div>

<!-- Popup -->

<div id="modal1" class="modal" ng-controller="AuthController">

  <!-- Signin Form -->
  <div class="container" ng-show="signin">
    <h3>Sign In</h3>
    <form ng-submit="attemptLogin()">
      <div class="row">
        <div class="input-field col s6">
          <input id="username" type="text" class="validate" ng-model="attemptedUsername">
          <label for="user_name" required>Username</label>
        </div>
      </div>
      <div class="row">
        <div class="input-field col s6">
          <input id="password" type="password" class="validate" ng-model="attemptedPassword">
          <label for="password" required>Password</label>
        </div>
      </div>
      <br>
      <p>(Don't have an account? <a ng-show="!isLoggedIn()" ng-click="showSignup()"><strong>Sign up!</strong></a>)</p>
      <br>
      <div class="row">
        <input type="submit" class="waves-effect waves-light btn">
        
        <p class="error-msg" ng-show="showUnauthMsg">Sorry, those credentials were not recognized.</p>
        <br>
      </div>
    </form>
  </div>

  <!--Sign Up Form-->

  <div class="container" ng-hide="signin">

  <h3>Sign Up</h3>
    <div class="row">
      <form class="col s12" ng-submit="attemptSignup()">
      
        <div class="row">
          <div class="input-field col s6">
            <input id="firstname" type="text" class="validate" ng-model="attemptedFirstName" required>
            <label for="first_name">First Name</label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s6">
            <input id="lastname" type="text" class="validate" ng-model="attemptedLastName" required>
            <label for="last_name">Last Name</label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s6">
            <input id="username" type="text" class="validate" ng-model="attemptedUsername" required>
            <label for="user_name">Username</label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s6">
            <input id="password" type="password" class="validate" ng-model="attemptedPassword" required>
            <label for="password">Password</label>
          </div>
        </div>
        <div class ="row">
          (Already have an account? <a ng-show="!isLoggedIn()" ng-click="showSignin()"><strong>Sign in!</strong></a>)
        </div>
        <div class="row">
          <input type="submit" class="waves-effect waves-light btn signinSubmitBtn">
          <br>
          <p class="error-msg" ng-show="showUnauthMsg">Sorry, that username has been taken</p>
        </div>
      </form>

    </div>
  </div>
</div>
